# The SECRET_INTERNAL_API_KEY in the provisioning_backend on heroku has to be similar in Netlify. And The REACT_APP_INTERNAL_API_KEY value in the root .env file has to be similar to the REACT_APP_SECRET_INTERNAL_API_KEY entry in the mayday_website folder

This is the command for generating a secure random key
~ node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"

To start provisioning server and it's client
~ npm run master_client_server

To push to production, the client is on netlify under www.maydaycrm.com project. Build is automatic since it's linked to the repo
~ The provisioning server is on heroku using a mono repo build. So we just have to trigger a build from the master branch using heroku's UI

TO START BOTH HUGAMARA HOSPITALITY SYSTEM AND CALL CENTER
~ Open two terminals
**_ In one, run cd "/Users/Mydhe Files/Hugamara" && npm run callcenter || Starts callcenter backend, client + provisioning server
_** In another, run "npm run server_client_hugamara"

DEPLOYING TO THE VM IN PRODUCTION
we connect using;
~ matovumedhi@Dlus-MacBook-Pro Downloads % pwd
/Users/matovumedhi/Downloads
matovumedhi@Dlus-MacBook-Pro Downloads % ssh -i "hugamara.pem" admin@ec2-13-234-18-2.ap-south-1.compute.amazonaws.com

~ sudo -i
~ Simple deploy (build frontends and restart PM2):
cd /home/admin/hugamara-portal && git pull && npm run deploy

Notes:
~ npm run deploy will: - install prod deps for backends - build hospitality client and callcenter dashboard - validate/reload nginx if config present - restart PM2 apps: hugamara-backend and mayday-callcenter-backend
~ Check processes/logs - pm2 status - pm2 logs
~ nginx is running from /etc/nginx/sites-available/hugamara
~ ecosystem.config.js is where production environment variables are saved (not .env). Only the frontend dashboards use .env (REACT*APP*\*)
~ Database: mayday-callcenter-backend uses 'root' user for asterisk database, not 'hugamara_user'
~ If needed, you can run the script directly: bash ./deploy-vm.sh
