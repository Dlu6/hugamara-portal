# Slave Backend Environment Configuration
# Copy this file to .env and fill in your values

# ========== DATABASE CONFIGURATION ==========
DB_HOST=localhost
DB_NAME=reach_mi_slave
DB_USER=root
DB_PASSWORD=your_password
DB_PORT=3306

# ========== REDIS CONFIGURATION ==========
# Redis is required for enhanced session management
# If Redis is not available, the system will fall back to database-only session management
REDIS_HOST=localhost
REDIS_PORT=6379
# Optional: Redis password if authentication is enabled
# REDIS_PASSWORD=your_redis_password

# ========== SERVER CONFIGURATION ==========
BACKEND_PORT=8004
NODE_ENV=development

# ========== MASTER SERVER CONNECTION ==========
# URL of the master licensing server
MASTER_SERVER_URL=http://localhost:8001
# Internal API key for master-slave communication
INTERNAL_API_KEY=your_internal_api_key
# WebSocket URL for real-time updates
MASTER_WEBSOCKET_URL=ws://localhost:8001

# ========== LICENSE CACHE CONFIGURATION ==========
# How long to cache license data (in milliseconds)
LICENSE_CACHE_TTL=1800000
# Background sync interval (in milliseconds)
BACKGROUND_SYNC_INTERVAL=900000

# ========== SESSION MANAGEMENT ==========
# Session cleanup interval (in milliseconds) - more frequent for better cleanup
SESSION_CLEANUP_INTERVAL=900000
# Session TTL (in seconds)
SESSION_TTL=86400

# ========== ASTERISK CONFIGURATION ==========
# AMI connection details
AMI_HOST=localhost
AMI_PORT=5038
AMI_USERNAME=admin
AMI_PASSWORD=your_ami_password

# ========== LOGGING ==========
LOG_LEVEL=info
LOG_FILE_PATH=./logs/slave-backend.log

# ========== SECURITY ==========
# JWT secret for session tokens
JWT_SECRET=your_jwt_secret_key_here
# Session secret for express-session
SESSION_SECRET=your_session_secret_here

# ========== CORS CONFIGURATION ==========
# Allowed origins for CORS
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,https://yourdomain.com

# ========== RATE LIMITING ==========
# Rate limiting configuration
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ========== WHATSAPP PROVIDER CONFIGURATION ==========
# Choose your WhatsApp provider: "facebook" or "lipachat"
WHATSAPP_PROVIDER=facebook

# ========== FACEBOOK WHATSAPP BUSINESS API ==========
# Facebook WhatsApp Business API configuration (Recommended)
WHATSAPP_API_URL=https://graph.facebook.com/v18.0
WHATSAPP_ACCESS_TOKEN=your_facebook_access_token
WHATSAPP_PHONE_NUMBER_ID=your_phone_number_id
WHATSAPP_BUSINESS_ACCOUNT_ID=your_business_account_id
WHATSAPP_VERIFY_TOKEN=your_verify_token

# ========== LIPACHAT WHATSAPP CONFIGURATION ==========
# Lipachat API configuration for WhatsApp Business (Alternative)
LIPACHAT_API_KEY=your_lipachat_api_key
LIPACHAT_PHONE_NUMBER=+1234567890
LIPACHAT_GATEWAY_URL=https://gateway.lipachat.com/api/v1/whatsapp
LIPACHAT_WEBHOOK_SECRET=your_webhook_secret
